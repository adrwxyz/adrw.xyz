{"version":3,"file":"component---node-modules-lekoarts-gatsby-theme-minimal-blog-core-src-templates-post-query-tsx-content-file-path-content-posts-tech-2022-03-26-home-networking-failures-copy-mdx-884681673eea519e934d.js","mappings":"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","sources":["webpack://adrw.xyz/./node_modules/@lekoarts/gatsby-theme-minimal-blog/src/components/post-footer.tsx","webpack://adrw.xyz/./node_modules/@lekoarts/gatsby-theme-minimal-blog/src/components/post.tsx","webpack://adrw.xyz/./node_modules/@lekoarts/gatsby-theme-minimal-blog/src/@lekoarts/gatsby-theme-minimal-blog-core/components/post.tsx","webpack://adrw.xyz/./node_modules/@lekoarts/gatsby-theme-minimal-blog/src/components/seo.tsx","webpack://adrw.xyz/./node_modules/@lekoarts/gatsby-theme-minimal-blog/src/components/item-tags.tsx","webpack://adrw.xyz/./content/posts/tech/2022-03-26-home-networking-failures copy.mdx","webpack://adrw.xyz/./node_modules/@lekoarts/gatsby-theme-minimal-blog-core/src/templates/post-query.tsx"],"sourcesContent":["/* eslint-disable @typescript-eslint/no-unused-vars */\nimport * as React from \"react\"\nimport type { MBPostProps } from \"./post\"\n\nconst PostFooter = ({ post }: MBPostProps) => null\n\nexport default PostFooter\n","/** @jsx jsx */\nimport type { HeadFC, PageProps } from \"gatsby\"\nimport * as React from \"react\"\nimport { jsx, Heading } from \"theme-ui\"\nimport Layout from \"./layout\"\nimport ItemTags from \"./item-tags\"\nimport Seo from \"./seo\"\nimport PostFooter from \"./post-footer\"\n\nexport type MBPostProps = {\n  post: {\n    slug: string\n    title: string\n    date: string\n    tags?: {\n      name: string\n      slug: string\n    }[]\n    description?: string\n    canonicalUrl?: string\n    excerpt: string\n    timeToRead?: number\n    banner?: {\n      childImageSharp: {\n        resize: {\n          src: string\n        }\n      }\n    }\n  }\n}\n\nconst px = [`16px`, `8px`, `4px`]\nconst shadow = px.map((v) => `rgba(0, 0, 0, 0.1) 0px ${v} ${v} 0px`)\n\nconst Post: React.FC<React.PropsWithChildren<PageProps<MBPostProps>>> = ({ data: { post }, children }) => (\n  <Layout>\n    <Heading as=\"h1\" variant=\"styles.h1\">\n      {post.title}\n    </Heading>\n    <p sx={{ color: `secondary`, mt: 3, a: { color: `secondary` }, fontSize: [1, 1, 2] }}>\n      <time>{post.date}</time>\n      {post.tags && (\n        <React.Fragment>\n          {` — `}\n          <ItemTags tags={post.tags} />\n        </React.Fragment>\n      )}\n      {post.timeToRead && ` — `}\n      {post.timeToRead && <span>{post.timeToRead} min read</span>}\n    </p>\n    <section\n      sx={{\n        my: 5,\n        \".gatsby-resp-image-wrapper\": {\n          my: [4, 4, 5],\n          borderRadius: `4px`,\n          boxShadow: shadow.join(`, `),\n          \".gatsby-resp-image-image\": {\n            borderRadius: `4px`,\n          },\n        },\n        variant: `layout.content`,\n      }}\n    >\n      {children}\n    </section>\n    <PostFooter post={post} />\n  </Layout>\n)\n\nexport default Post\n\nexport const Head: HeadFC<MBPostProps> = ({ data: { post } }) => (\n  <Seo\n    title={post.title}\n    description={post.description ? post.description : post.excerpt}\n    image={post.banner ? post.banner?.childImageSharp?.resize?.src : undefined}\n    pathname={post.slug}\n    canonicalUrl={post.canonicalUrl}\n  />\n)\n","import type { PageProps } from \"gatsby\"\nimport * as React from \"react\"\nimport Post, { Head, MBPostProps } from \"../../../components/post\"\n\nexport default function MinimalBlogCorePost({ ...props }: PageProps<MBPostProps>) {\n  return <Post {...props} />\n}\n\nexport { Head }\n","import * as React from \"react\"\nimport { withPrefix } from \"gatsby\"\nimport useSiteMetadata from \"../hooks/use-site-metadata\"\n\ntype SEOProps = {\n  title?: string\n  description?: string\n  pathname?: string\n  image?: string\n  children?: React.ReactNode\n  canonicalUrl?: string\n}\n\nconst Seo = ({\n  title = ``,\n  description = ``,\n  pathname = ``,\n  image = ``,\n  children = null,\n  canonicalUrl = ``,\n}: SEOProps) => {\n  const site = useSiteMetadata()\n\n  const {\n    siteTitle,\n    siteTitleAlt: defaultTitle,\n    siteUrl,\n    siteDescription: defaultDescription,\n    siteImage: defaultImage,\n    author,\n    siteLanguage,\n  } = site\n\n  const seo = {\n    title: title ? `${title} | ${siteTitle}` : defaultTitle,\n    description: description || defaultDescription,\n    url: `${siteUrl}${pathname || ``}`,\n    image: `${siteUrl}${image || defaultImage}`,\n  }\n  return (\n    <>\n      <html lang={siteLanguage} />\n      <title>{seo.title}</title>\n      <meta name=\"description\" content={seo.description} />\n      <meta name=\"image\" content={seo.image} />\n      <meta property=\"og:title\" content={seo.title} />\n      <meta property=\"og:url\" content={seo.url} />\n      <meta property=\"og:description\" content={seo.description} />\n      <meta property=\"og:image\" content={seo.image} />\n      <meta property=\"og:type\" content=\"website\" />\n      <meta property=\"og:image:alt\" content={seo.description} />\n      <meta name=\"twitter:card\" content=\"summary_large_image\" />\n      <meta name=\"twitter:title\" content={seo.title} />\n      <meta name=\"twitter:url\" content={seo.url} />\n      <meta name=\"twitter:description\" content={seo.description} />\n      <meta name=\"twitter:image\" content={seo.image} />\n      <meta name=\"twitter:image:alt\" content={seo.description} />\n      <meta name=\"twitter:creator\" content={author} />\n      <meta name=\"gatsby-theme\" content=\"@lekoarts/gatsby-theme-minimal-blog\" />\n      <link rel=\"icon\" type=\"image/png\" sizes=\"32x32\" href={withPrefix(`/favicon-32x32.png`)} />\n      <link rel=\"icon\" type=\"image/png\" sizes=\"16x16\" href={withPrefix(`/favicon-16x16.png`)} />\n      <link rel=\"apple-touch-icon\" sizes=\"180x180\" href={withPrefix(`/apple-touch-icon.png`)} />\n      {canonicalUrl ? <link rel=\"canonical\" href={canonicalUrl} /> : null}\n      {children}\n    </>\n  )\n}\n\nexport default Seo\n","/** @jsx jsx */\nimport { jsx } from \"theme-ui\"\nimport * as React from \"react\"\nimport { Link } from \"gatsby\"\nimport useMinimalBlogConfig from \"../hooks/use-minimal-blog-config\"\nimport replaceSlashes from \"../utils/replaceSlashes\"\n\ntype TagsProps = {\n  tags: {\n    name: string\n    slug: string\n  }[]\n}\n\nconst ItemTags = ({ tags }: TagsProps) => {\n  const { tagsPath, basePath } = useMinimalBlogConfig()\n\n  return (\n    <React.Fragment>\n      {tags.map((tag, i) => (\n        <React.Fragment key={tag.slug}>\n          {!!i && `, `}\n          <Link sx={(t) => ({ ...t.styles?.a })} to={replaceSlashes(`/${basePath}/${tagsPath}/${tag.slug}`)}>\n            {tag.name}\n          </Link>\n        </React.Fragment>\n      ))}\n    </React.Fragment>\n  )\n}\n\nexport default ItemTags\n","/*@jsxRuntime classic @jsx React.createElement @jsxFrag React.Fragment*/\nimport {useMDXComponents as _provideComponents} from \"@mdx-js/react\";\nimport React from \"react\";\nfunction _createMdxContent(props) {\n  const _components = Object.assign({\n    p: \"p\",\n    h2: \"h2\",\n    a: \"a\"\n  }, _provideComponents(), props.components);\n  return React.createElement(React.Fragment, null, React.createElement(_components.p, null, \"For me, the phrase \\\"Learn to do by doing\\\" is truly self-descriptive of my learning style.\"), \"\\n\", React.createElement(_components.p, null, \"Thus, even in technical matters, I more naturally pay attention to the nuances and limitations of a technical system when it fails than when I initially set it up and skim the getting started guide.\"), \"\\n\", React.createElement(_components.p, null, \"Some folks enjoy pouring over documentation before writing or deploying any code. I do not find that intuitive.\"), \"\\n\", React.createElement(_components.p, null, \"Thus the past month, more than any other yet, has been a 200-level course on home networking; taught by none other than my own failures and fixes.\"), \"\\n\", React.createElement(_components.h2, null, \"Don't run a public DNS server\"), \"\\n\", React.createElement(_components.p, null, \"Simply, DNS servers map a domain name (ie. adrw.xyz) to an IP address for the server where that website is hosted.\"), \"\\n\", React.createElement(_components.p, null, \"Ad blockers are most easily installed with a browser extension. But for more comprehensive capabilities without configuring on every device and browser, an ad blocker at the DNS level is preferable. You can override the real DNS record locally for some bad domain (ie. tracker.net) and black hole it to 0.0.0.0 which will fail to resolve and thus stop the ads and tracking.\"), \"\\n\", React.createElement(_components.p, null, \"For many years, I've used a custom script to add 50k+ black hole DNS records to my computer's /etc/hosts file which worked well. After it was added to \", React.createElement(_components.a, {\n    href: \"http://cloudron.io\"\n  }, \"Cloudron\"), \", I started using \", React.createElement(_components.a, {\n    href: \"https://adguard.com/en/adguard-home/overview.html\"\n  }, \"AdGuard\"), \" instead since it does the same black-holing of bad sites but as a DNS server you can point your home router and devices to.\"), \"\\n\", React.createElement(_components.p, null, \"I hosted AdGuard on Cloudron on a cloud VPS and for months everything worked perfectly.\"), \"\\n\", React.createElement(_components.p, null, \"When I recently chose to cut monthly cloud VPS costs and take a stab at self-hosting in my basement, I made a fatal mistake.\"), \"\\n\", React.createElement(_components.p, null, \"In opening up public ports to be able to forward traffic to my local reverse proxy and other hosted services, I decided to do what I had done on my cloud VPS and open up port 53, DNS, so that I could use my AdGuard instance when I was out of the house.\"), \"\\n\", React.createElement(_components.p, null, \"It worked well for a while, until I received an email from my ISP. Something along the lines of \\\"there is unacceptable DNS traffic noticed on your network and we will cut off service if it does not stop\\\".\"), \"\\n\", React.createElement(_components.p, null, \"Well, I guess that was the end of that. Local ISPs don't like home servers and prefer data centers that pay the big bucks.\"), \"\\n\", React.createElement(_components.p, null, \"I closed my public port 53 and kept my internet service\"), \"\\n\", React.createElement(_components.h2, null, \"Don't reveal your public IP\"), \"\\n\", React.createElement(_components.p, null, \"Unfortunately, closing port 53 at the demand of my local ISP was not sufficient.\"), \"\\n\", React.createElement(_components.p, null, \"Turns out, hosting your own public DNS server on consumer grade equipment and networks is a horrible idea.\"), \"\\n\", React.createElement(_components.p, null, \"Within a few weeks of closing my public port 53, I noticed that my other self-hosted services were increasingly slow to access by their public domains and in some cases fully offline.\"), \"\\n\", React.createElement(_components.p, null, \"I thought I had messed up the reverse proxy rules somehow and spent almost a week almost going insane rolling back and trying to debug my Traefik proxy.\"), \"\\n\", React.createElement(_components.p, null, \"Not until the end of the week did it finally occur to me to check if I can even still login to my residential ISP modem. When I tried, the login page wouldn't load. On reboot, the same thing. On reboot with the external access coax unplugged, it finally loaded.\"), \"\\n\", React.createElement(_components.p, null, \"It turns out my public DNS ad-blocker ended up throwing up a smoke signal that my IP was ripe for a DDOS (distributed denial-of-service) attack.\"), \"\\n\", React.createElement(_components.h2, null, \"The necessity of Cloudflare\"), \"\\n\", React.createElement(_components.p, null, \"While I had heard about Cloudflare and used it briefly in the past, I had been satisfied with the experience at Namecheap for both domain registration and setting up DNS records so I hadn't considered switching.\"), \"\\n\", React.createElement(_components.p, null, \"After realizing my home network was being DDOS-ed and all services rendered unavailable, I realized the necessity of a well-provisioned, secured, high-scale front door for traffic.\"), \"\\n\", React.createElement(_components.p, null, \"Cloudflare offers many services, but the one that they cut their teeth on was DDOS protection by being a cloud proxy for all requests to your websites and services.\"), \"\\n\", React.createElement(_components.p, null, \"Instead of pointing your DNS records from a registrar like Namecheap directly at your server, you would used Cloudflare as your DNS server and configure all records there.\"), \"\\n\", React.createElement(_components.p, null, \"Any public network requests would go to Cloudflare to resolve DNS and instead of getting your server IP address, be redirected to a Cloudflare proxy server which would handle proxying traffic to your server without leaking your IP address.\"), \"\\n\", React.createElement(_components.p, null, \"Cloudflare, depended on by large swaths of internet services, screens packets for bots and protects against DDOS attacks by having huge network capabilities so that it's practically impossible for a DDOS attack to overwhelm Cloudflare's network equipment and capabilities. They can then dump all DDOS packets and protect your networking equipment and servers from being paralyzed under the load.\"), \"\\n\", React.createElement(_components.p, null, \"Not for this to be exclusively an advertisement for Cloudflare, I'm sure there are alternatives, but it is the one that I knew about and has ended up being the solution I needed.\"), \"\\n\", React.createElement(_components.h2, null, \"Don't leave all public ports open\"), \"\\n\", React.createElement(_components.p, null, \"Prior to migrating to self-hosting my services, I was with a different ISP where I had a modem-only device to connect to the internet. I used my own EdgeRouter and other Unifi equipment to handle routing, switches, and WiFi access points. Recently, I switched ISPs and was given an all-in-one modem router gateway to replace my modem-only.\"), \"\\n\", React.createElement(_components.p, null, \"This meant I now had two UIs which offered port forwarding, my new all-in-one ISP modem-router-gateway and my EdgeRouter. I was lazy and didn't want to copy all the records over so I left all ports open on my all-in-one, and pointed them to my EdgeRouter which still had the more limited set of rules.\"), \"\\n\", React.createElement(_components.p, null, \"Notably this may also have had an affect on bringing a DDOS attack on myself.\"), \"\\n\", React.createElement(_components.h2, null, \"Set local ISP modem to bridge mode\"), \"\\n\", React.createElement(_components.p, null, \"Additionally, the consumer grade all-in-one was no match for handling all that traffic let alone routing it based on port.\"), \"\\n\", React.createElement(_components.p, null, \"Thus I looked into switching the all-in-one to \\\"bridge mode\\\" which would disable all functionality except the modem, and hopefully perform better.\"), \"\\n\", React.createElement(_components.p, null, \"Even after switching my domains to Cloudflare, there remained the pesky fact that my current IP address from my local ISP was likely compromised and on all sorts of DDOS lists that practically would be impossible to get off.\"), \"\\n\", React.createElement(_components.p, null, \"Thankfully, \\\"bridge mode\\\" for at least my ISP forced a refresh of the IP address which solved the aboveforementioned problem of having a spoiled public IP address.\"), \"\\n\", React.createElement(_components.h2, null, \"Don't make all services public\"), \"\\n\", React.createElement(_components.p, null, \"While it seemed intuitively fun to have my Minio instance and all other services publicly accessible without VPN, in practice this vastly broadened my threat surface.\"), \"\\n\", React.createElement(_components.p, null, \"For Minio, an open source S3 bucket storage clone, there's no need for it to be public if all access is done within my internal network.\"), \"\\n\", React.createElement(_components.p, null, \"For others, limiting by VPN access isn't a limit either.\"), \"\\n\", React.createElement(_components.p, null, \"And as many as can be made internal-only, shrinks public DDOS targets and improves availability of internal services which aren't being hit with traffic anymore.\"), \"\\n\", React.createElement(_components.h2, null, \"Use router DNS override to improve within network latency\"), \"\\n\", React.createElement(_components.p, null, \"For an self-hosted service exposed externally, access within your own network will by default make the long journey to resolve DNS at your ISP or Cloudflare's authoratative DNS server and then back to your home network's public IP address, through the front door of your usual reverse proxy back to your service.\"), \"\\n\", React.createElement(_components.p, null, \"This long journey is avoidable since both your computer or phone making the request and the service are both in the same subnet!\"), \"\\n\", React.createElement(_components.p, null, \"By setting up \", React.createElement(_components.a, {\n    href: \"https://youtu.be/e34QNh16fh8\"\n  }, \"DNS overrides on your router\"), \", outgoing requets to your services can be immediately intercepted by your router and sent directly to the service without even leaving your subnet and going out into the public internet.\"), \"\\n\", React.createElement(_components.p, null, \"This is one way that you can get improved local performance when accessing your services at home, and simplicity in configuration since you can use the same full domain name when accessing them externally or internally without having to fallback to a local IP address or local domain separate from the public one.\"), \"\\n\", React.createElement(_components.h2, null, \"Concluding Thoughts\"), \"\\n\", React.createElement(_components.p, null, \"All in all, I learned a lot more about managing network infrastructure the past month than I expected; all from failures, fixes, and new guidelines to rule by.\"));\n}\nfunction MDXContent(props = {}) {\n  const {wrapper: MDXLayout} = Object.assign({}, _provideComponents(), props.components);\n  return MDXLayout ? React.createElement(MDXLayout, props, React.createElement(_createMdxContent, props)) : _createMdxContent(props);\n}\nexport default MDXContent;\n","import React from \"react\";\nimport GATSBY_COMPILED_MDX from \"/home/runner/work/adrw.xyz/adrw.xyz/content/posts/tech/2022-03-26-home-networking-failures copy.mdx\";\nimport PostComponent, {Head} from \"../components/post\";\nPostComponent\nexport default function GatsbyMDXWrapper(props) {\n  return React.createElement(PostComponent, props, React.createElement(GATSBY_COMPILED_MDX, props));\n}\nexport {Head};\nconst query = \"2040642971\";\n"],"names":["_ref","post","shadow","map","v","data","children","jsx","Layout","Heading","as","variant","title","sx","color","mt","a","fontSize","date","tags","React","ItemTags","timeToRead","my","borderRadius","boxShadow","join","PostFooter","Head","_ref2","_post$banner","_post$banner$childIma","_post$banner$childIma2","Seo","description","excerpt","image","banner","childImageSharp","resize","src","undefined","pathname","slug","canonicalUrl","MinimalBlogCorePost","props","Post","site","useSiteMetadata","siteTitle","siteTitleAlt","defaultTitle","siteUrl","siteDescription","defaultDescription","siteImage","defaultImage","author","siteLanguage","seo","url","lang","name","content","property","rel","type","sizes","href","withPrefix","tagsPath","basePath","useMinimalBlogConfig","tag","i","key","Link","t","_t$styles","styles","to","replaceSlashes","_createMdxContent","_components","Object","assign","p","h2","_provideComponents","components","wrapper","MDXLayout","GatsbyMDXWrapper","PostComponent","GATSBY_COMPILED_MDX"],"sourceRoot":""}